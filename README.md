# OCR Переводчик

Веб-сервис для распознавания текста с изображений и перевода с английского на русский язык.

## Обзор системы

Сервис предоставляет возможность:
- Загрузки изображений с печатным английским текстом
- Распознавания текста с помощью EasyOCR
- Перевода текста на русский через Gemini API
- Сохранения результатов в MySQL
- Скачивания переведённого текста в формате TXT

## Технический стек

| Компонент | Технологии |
|-----------|------------|
| Фронтенд | HTML5, CSS3, Vanilla JavaScript |
| Бэкенд | Python 3.10+ (Flask) |
| OCR | EasyOCR |
| Переводчик | Gemini API (google-generativeai) |
| База данных | MySQL |

## Функциональные возможности

### Пользовательский интерфейс
- **Загрузка изображений**: Drag & drop область и кнопка "Выбрать файл"
- **Поддерживаемые форматы**: JPG, PNG, JPEG
- **Максимальный размер**: 5 МБ
- **Отображение статуса**: Прогресс-бар обработки и уведомления об ошибках
- **Результаты**: Превью загруженного изображения, кнопка "Скачать перевод", ссылка на историю переводов

## Установка и настройка

### Требования
- Python 3.10+
- MySQL 5.7+
- Gemini API ключ

### 1. Клонирование репозитория
```bash
git clone <repository-url>
cd ocr-translator
```

### 2. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 3. Настройка базы данных
```bash
# Войдите в MySQL и выполните:
mysql -u root -p < database.sql
```

### 4. Конфигурация окружения
```bash
# Скопируйте файл примера конфигурации
cp .env.example .env

# Отредактируйте .env файл, указав свои параметры:
nano .env
```

Заполните следующие параметры в `.env`:
```env
GEMINI_API_KEY=ваш_ключ_gemini_api
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=ваш_пароль_mysql
DB_NAME=ocr_translator
FLASK_SECRET_KEY=ваш_секретный_ключ
FLASK_ENV=development
```

### 5. Получение Gemini API ключа
1. Перейдите на [AI Studio](https://aistudio.google.com/app/apikey)
2. Создайте новый API ключ
3. Скопируйте ключ в переменную `GEMINI_API_KEY` в файле `.env`

### 6. Запуск приложения
```bash
python app.py
```

Приложение будет доступно по адресу: http://localhost:5000

## Структура проекта

```
ocr-translator/
├── app.py                 # Основное Flask приложение
├── requirements.txt       # Python зависимости
├── .env.example          # Пример конфигурации
├── database.sql          # SQL скрипт инициализации БД
├── README.md             # Документация
├── templates/
│   └── index.html        # Главная страница
├── static/
│   ├── css/
│   │   └── styles.css    # Стили
│   └── js/
│       └── script.js     # JavaScript функционал
└── uploads/              # Папка для загруженных изображений (создается автоматически)
```

## API Эндпоинты

### POST /upload
Загрузка и обработка изображения.

**Параметры:**
- `file` (multipart/form-data) - Изображение для обработки

**Ответ:**
```json
{
  "success": true,
  "id": 1,
  "original_text": "распознанный текст",
  "translated_text": "переведенный текст",
  "image_preview": "data:image/png;base64,...",
  "filename": "timestamp_filename.jpg"
}
```

### GET /download/<id>
Скачивание переведенного текста.

### GET /history
Получение истории переводов.

## Использование

1. **Загрузка изображения**: Перетащите изображение в область загрузки или используйте кнопку "Выбрать файл"
2. **Обработка**: Дождитесь завершения распознавания и перевода
3. **Просмотр результатов**: Просмотрите распознанный и переведенный текст
4. **Скачивание**: Нажмите "Скачать перевод" для получения TXT файла
5. **История**: Используйте "История переводов" для просмотра предыдущих результатов

## Особенности

- **Автоматическое изменение размера**: Изображения автоматически обрабатываются для оптимального распознавания
- **Сохранение истории**: Все переводы сохраняются в базе данных
- **Отзывчивый дизайн**: Интерфейс адаптируется под различные устройства
- **Обработка ошибок**: Подробные сообщения об ошибках для пользователя

## Ограничения

- Поддерживает только английский текст для распознавания
- Максимальный размер файла: 5 МБ
- Поддерживаемые форматы: JPG, PNG, JPEG
- Требуется подключение к интернету для работы Gemini API

## Устранение неполадок

### Ошибка подключения к базе данных
- Убедитесь, что MySQL запущен
- Проверьте параметры подключения в `.env`
- Убедитесь, что база данных создана

### Ошибка Gemini API
- Проверьте правильность API ключа
- Убедитесь в наличии интернет-соединения
- Проверьте квоты API

### Ошибки OCR
- Убедитесь, что на изображении есть читаемый текст
- Попробуйте изображение с лучшим качеством
- Убедитесь, что текст на английском языке

## Лицензия

MIT License - см. файл LICENSE для подробностей.